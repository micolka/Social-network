{"version":3,"sources":["hoc/withAuthRedirect.js","components/Profile/MyPosts/ProfileInfo/ProfileInfo.module.css","components/Profile/MyPosts/MyPosts.module.css","components/Profile/MyPosts/Post/Post.module.css","components/Profile/Profile.module.css","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","components/Profile/ProfileStatus/ProfileStatusWithHooks.jsx","components/Profile/MyPosts/ProfileInfo/ProfileInfo.jsx","components/Profile/MyPosts/Post/Post.jsx","components/Profile/MyPosts/MyPosts.jsx","components/Profile/MyPosts/MyPostsContainer.jsx","components/Profile/Profile.jsx","components/Profile/ProfileContainer.jsx"],"names":["mapStateToPropsForRedirect","state","isAuth","authData","isAuthorised","isInProcess","isAuthInProcess","withAuthRedirect","Component","RedirectComponent","this","props","to","React","connect","module","exports","_slicedToArray","arr","i","Array","isArray","Symbol","iterator","Object","prototype","toString","call","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","value","length","err","TypeError","ProfileStatusWithHooks","useState","status","localStatus","setlocalStatus","editMode","setEditMode","useEffect","onDoubleClick","isOwner","autoFocus","onBlur","updateStatus","onChange","e","currentTarget","ProfileInfo","profile","toggleFetching","className","s","descriptionBlock","src","photos","large","userDefaultPhoto","alt","inputSendImage","id","type","target","files","savePhoto","btnSendImage","for","fullName","aboutMe","lookingForAJob","lookingForAJobDescription","Post","item","message","likeCount","maxLength","maxLengthCreator","PublishPostReduxForm","reduxForm","form","onSubmit","handleSubmit","Field","placeholder","name","component","TextArea","validate","requiredField","inputPost","btnSendPost","MyPosts","formatedPostsData","posts","map","elem","key","postsBlock","formData","postTxtValue","addPost","MyPostsContainer","profileData","Profile","profileBlock","profileInfo","postContainer","ProfileContainer","UserID","match","params","userId","showUserProfile","getUserStatus","refreshProfile","prevProps","toggleIsFetching","compose","showUserProfileThunckCreator","getStatusThunckCreator","updateStatusThunckCreator","saveProfilePhotoThunckCreator","withRouter"],"mappings":"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","file":"static/js/3.994c6f22.chunk.js","sourcesContent":["import React from \"react\";\r\nimport {Redirect} from \"react-router-dom\";\r\nimport {connect} from \"react-redux\";\r\n\r\nlet mapStateToPropsForRedirect = (state) => ({\r\n    isAuth: state.authData.isAuthorised,\r\n    isInProcess: state.authData.isAuthInProcess\r\n});\r\n\r\nexport const withAuthRedirect = (Component) => {\r\n    class RedirectComponent extends React.Component {\r\n        render () {\r\n            if (!this.props.isAuth) return <Redirect to={\"/login\"}/>;\r\n            return <Component  {...this.props}/>\r\n        }\r\n    }\r\n\r\n    return connect(mapStateToPropsForRedirect)(RedirectComponent);\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"descriptionBlock\":\"ProfileInfo_descriptionBlock__2yzNo\",\"fontImage\":\"ProfileInfo_fontImage__33zlM\",\"btnSendImage\":\"ProfileInfo_btnSendImage__2qcAv\",\"inputSendImage\":\"ProfileInfo_inputSendImage__3NyFg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"postsBlock\":\"MyPosts_postsBlock__1giM0\",\"posts\":\"MyPosts_posts__2TNe9\",\"inputPost\":\"MyPosts_inputPost__2fOYd\",\"btnSendPost\":\"MyPosts_btnSendPost__2wq0v\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"Post_item__2TPp4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profileBlock\":\"Profile_profileBlock__fnQVW\",\"postContainer\":\"Profile_postContainer__1CiUq\",\"profileInfo\":\"Profile_profileInfo__1i-G5\"};","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}","import React, {useEffect, useState} from \"react\";\r\n\r\nconst ProfileStatusWithHooks = (props) => {\r\n\r\n\r\n    // Пример использования hook / хуков\r\n    // Локальный стейт для сосхранения временного статуса и функции для его изменения\r\n    let [localStatus, setlocalStatus] = useState(props.status);\r\n    let [editMode, setEditMode] = useState(false);\r\n\r\n    // Синхронизация статуса после изменения пропсов\r\n    useEffect( () => {\r\n        setlocalStatus(props.status);\r\n    },[props.status]);\r\n\r\n    // Активатор изменения статуса Юзера\r\n    const activateEditMode = () => {\r\n        if (props.isOwner) {\r\n            setEditMode(true);\r\n        }\r\n    }\r\n\r\n    const deActivateEditMode = () => {\r\n        setEditMode(false);\r\n        props.updateStatus(localStatus);\r\n    }\r\n\r\n    // Метод обрабатывает изменение статуса. Отправляет инфу на сервак.\r\n    const onStatusChange = (e) => {\r\n            setlocalStatus(e.currentTarget.value);\r\n    }\r\n\r\n    return <>\r\n        { !editMode &&\r\n        <div>\r\n            <span onDoubleClick={activateEditMode}>{props.status || '------'}</span>\r\n        </div>\r\n        }\r\n        { editMode &&\r\n        <div>\r\n            <input autoFocus={true} onBlur={deActivateEditMode}\r\n                   value={localStatus} onChange={onStatusChange}/>\r\n        </div>\r\n        }\r\n    </>\r\n\r\n};\r\n\r\nexport default ProfileStatusWithHooks;","import React from 'react';\r\nimport s from './ProfileInfo.module.css'\r\nimport userDefaultPhoto from \"../../../../asets/images/userDefaultPhoto.png\";\r\nimport ProfileStatusWithHooks from \"../../ProfileStatus/ProfileStatusWithHooks\";\r\n\r\nconst ProfileInfo = (props) => {\r\n    // Отображаем прелодер, если инфа о профайле еще не подгрузилась\r\n    if (!props.profile) {\r\n        props.toggleFetching(true);\r\n        return <></>;\r\n    } else {\r\n        props.toggleFetching(false);\r\n    }\r\n\r\n    const onMainPhotoSelected = (e) => {\r\n        if (e.target.files.length) {\r\n            props.savePhoto(e.target.files[0]);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div>\r\n{/*         <div className={s.fontImage}>\r\n                <img src='https://images.unsplash.com/photo-1499084732479-de2c02d45fcc?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&w=1000&q=80' alt=\"backImage\"></img>\r\n            </div> */}\r\n            <ProfileStatusWithHooks isOwner={props.isOwner} status={props.status} updateStatus={props.updateStatus}/>\r\n            <div className={s.descriptionBlock}>\r\n                <img src={props.profile.photos.large || userDefaultPhoto} alt=\"ava\"></img>\r\n                {props.isOwner && <div>\r\n                    <input className={s.inputSendImage} id={\"input_file\"} type={\"file\"} onChange={onMainPhotoSelected} />\r\n                    <label className={s.btnSendImage} for={\"input_file\"}>Change avatar</label>\r\n                    </div>}\r\n                <div>\r\n                    {props.profile.fullName}\r\n                </div>\r\n                <div>\r\n                    {props.profile.aboutMe}\r\n                </div>\r\n                <div>\r\n                    {props.profile.lookingForAJob ? \"Ищу работу: \" : \"Ниче не ищу. \"}\r\n                    {props.profile.lookingForAJobDescription}\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ProfileInfo;","import React from 'react';\r\nimport s from './Post.module.css'\r\n\r\nconst Post = (props) => {\r\n  return (\r\n    <div className={s.item}>\r\n      <img src='https://cdn4.iconfinder.com/data/icons/halloween-colored-1/96/halloween_monster_zombie_96-512.png' alt=\"zombie ava\"></img>\r\n      {props.message}\r\n      <div>\r\n        <span>like {props.likeCount}</span>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Post;","import React from 'react';\r\nimport s from './MyPosts.module.css'\r\nimport Post from './Post/Post';\r\nimport {Field, reduxForm} from \"redux-form\";\r\nimport {maxLengthCreator, requiredField} from \"../../../utils/validators/validators\";\r\nimport {TextArea} from \"../../../utils/validators/customTextArea\";\r\n\r\nconst MyPosts = (props) => {\r\n\r\n    // создание массива тегов с постами для рендера\r\n    let formatedPostsData = props.posts.map((elem) => {\r\n        return <Post key ={elem.id} message={elem.message} likeCount={elem.likeCount}/>;\r\n    });\r\n\r\n    // обработка события Publish Post\r\n    const onSubmit = (formData) => {\r\n        let {postTxtValue} = formData;\r\n        props.addPost(postTxtValue);\r\n    };\r\n\r\n    return (\r\n        <div className={s.postsBlock}>\r\n            <h3>My posts</h3>\r\n            <PublishPostReduxForm onSubmit={onSubmit}/>\r\n            <div className={s.posts}>\r\n                {formatedPostsData}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nlet maxLength = maxLengthCreator(50);\r\n\r\nconst PublishPostForm = (props) => {\r\n    return <form onSubmit={props.handleSubmit}>\r\n        <div>\r\n            <Field placeholder={'Type something here'} name={\"postTxtValue\"}\r\n                   component={TextArea} validate={[requiredField, maxLength]} className={s.inputPost}/>\r\n        </div>\r\n        <div>\r\n            <button className={s.btnSendPost}>Add post</button>\r\n        </div>\r\n    </form>\r\n};\r\n                                            // a unique name for the form\r\nconst PublishPostReduxForm = reduxForm({form: 'publishPostForm'})(PublishPostForm);\r\n\r\nexport default MyPosts;","import {addPost} from \"../../../redux/profileReducer\";\r\nimport MyPosts from \"./MyPosts\";\r\nimport {connect} from \"react-redux\";\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        posts: state.profileData.posts\r\n    };\r\n};\r\n\r\nconst MyPostsContainer = connect(mapStateToProps, {addPost})(MyPosts);\r\nexport default MyPostsContainer;","import React from 'react';\r\nimport ProfileInfo from \"./MyPosts/ProfileInfo/ProfileInfo\";\r\nimport MyPostsContainer from \"./MyPosts/MyPostsContainer\";\r\nimport s from \"./Profile.module.css\"\r\n\r\n\r\nconst Profile = (props) => {\r\n    return (\r\n        <div className={s.profileBlock}>\r\n            <div className={s.profileInfo} >\r\n                <ProfileInfo isOwner={props.isOwner} profile={props.profile} status={props.status}\r\n                             updateStatus={props.updateStatus} toggleFetching={props.toggleFetching}\r\n                             savePhoto={props.savePhoto}/>\r\n            </div>\r\n            <div className={s.postContainer}>\r\n                <MyPostsContainer />\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Profile;","import React from 'react';\r\nimport Profile from \"./Profile\";\r\nimport {connect} from \"react-redux\";\r\nimport {    getStatusThunckCreator,\r\n            showUserProfileThunckCreator,\r\n            updateStatusThunckCreator,\r\n            saveProfilePhotoThunckCreator } from \"../../redux/profileReducer\";\r\nimport {withRouter} from \"react-router-dom\";\r\nimport {withAuthRedirect} from \"../../hoc/withAuthRedirect\";\r\nimport {compose} from \"redux\";\r\nimport {toggleIsFetching} from \"../../redux/usersReducer\";\r\n\r\nclass ProfileContainer extends React.Component {\r\n\r\n    refreshProfile () {\r\n        // Берем параметр UserID из адресной строки\r\n        let UserID = this.props.match.params.userId;\r\n        if (!UserID) UserID = this.props.userId;\r\n        this.props.showUserProfile(UserID);\r\n        this.props.getUserStatus(UserID);\r\n    }\r\n\r\n    // Первая отрисовка страницы\r\n    componentDidMount() {\r\n        this.refreshProfile();\r\n    }\r\n\r\n    // Обновление компоненты\r\n    componentDidUpdate(prevProps) {\r\n        if (this.props.match.params.userId !== prevProps.match.params.userId) {\r\n            this.refreshProfile();\r\n        }\r\n    }\r\n\r\n    render() {\r\n\r\n        return (\r\n            <Profile isOwner ={!this.props.match.params.userId}\r\n                profile={this.props.profile}\r\n                status={this.props.status}\r\n                updateStatus={this.props.updateStatus}\r\n                savePhoto={this.props.savePhoto}\r\n                toggleFetching={this.props.toggleIsFetching} />\r\n        );\r\n    }\r\n}\r\n\r\nlet mapStateToProps = (state) => ({\r\n    profile: state.profileData.profile,\r\n    status: state.profileData.status,\r\n    userId: state.authData.userId\r\n});\r\n\r\nexport default compose(\r\n    connect(mapStateToProps,{showUserProfile: showUserProfileThunckCreator,\r\n                            getUserStatus: getStatusThunckCreator,\r\n                            updateStatus: updateStatusThunckCreator,\r\n                            savePhoto: saveProfilePhotoThunckCreator,\r\n                            toggleIsFetching: toggleIsFetching}),\r\n    withRouter,\r\n    withAuthRedirect\r\n)(ProfileContainer);\r\n"],"sourceRoot":""}